<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
	<link rel="shortcut icon" href="#">
	<!-- jQuery -->
	<script th:src="@{/js/jquery/jquery-3.6.0.min.js}" type="text/javascript"></script>
	
	<!-- Bootstrap 4.0.0 -->
	<link th:href="@{/css/bootstrap-4.6.1/bootstrap.css}" rel="stylesheet" type="text/css" />
	<link th:href="@{/css/bootstrap-4.6.1/login.css}" rel="stylesheet" type="text/css" />
	
	<!-- Common -->
	<script th:src="@{/js/common/hjho-string-utils.js}" type="text/javascript"></script>
	<script th:src="@{/js/common/hjho-ajax-utils.js}" type="text/javascript"></script>
	<script th:src="@{/js/common/hjho-date-utils.js}" type="text/javascript"></script>
	<script th:src="@{/js/common/hjho-event-utils.js}" type="text/javascript"></script>
	
<title>프로젝트 연습(로그인)</title>
</head>
<body class="text-center">
	<form class="form-signin" id="loginFormData">
    	<img class="mb-4" th:src="@{/images/bootstrap-stack.png}" alt="" width="72" height="72">
      	<h1 class="h3 mb-3 font-weight-normal">Practice Login</h1>
      	<div class="row">
	      	<label class="col-md-3 mt-2 text-right" for="userId">Id</label>
	      	<input class="col-md-9 form-control" type="text" id="userId" name="userId" placeholder="Identification">
	      	
	      	<label class="col-md-3 mt-2 text-right" for=userPw>Pw</label>
	      	<input class="col-md-9 form-control" type="password" id="userPw" name="userPw" placeholder="Password">
	      	
	      	<label class="col-sm-3 mt-2 text-right" for=userName>Name</label>
	      	<input class="col-sm-9 form-control" type="text" id="userName" name="userName" placeholder="TEST">
	      	
	      	<label class="col-sm-3 mt-2 text-right" for=dtm>Time</label>
	      	<input class="col-sm-9 form-control" type="text" id="dtm" name="dtm" placeholder="TEST">
	      	
	      	<label class="col-sm-3 mt-2 text-right" for="num">Num</label>
	      	<input class="col-sm-9 form-control" type="text" id="num" name="num" onkeyup="EventUtils.commaFormat(this)" placeholder="TEST">
	      	
	      	<label class="col-sm-3 mt-2 text-right"></label>
        	<label class="col-sm-9 text-left pl-0">
          		<input type="checkbox" value="remember-me" id="check" name="check" onclick="EventUtils.checkBoxVal(this)"> 아이디 기억
        	</label>
		</div>
	    <button class="btn btn-lg btn-primary btn-block" onclick="loginProc()">로그인</button>
	    <p class="mt-5 mb-3 text-muted">&copy; 2021-ING</p>
    </form>
</body>
<script th:inline="javascript">
	$(document).ready(function() {
		
		fnLoginDtlInit();
		
		$('#loginFormData').submit(function() {
		    return false; // return false to cancel form action
		});
		
	});
	function fnLoginDtlInit() {
		$('#loginFormData').find('#userName').val("홀길동").attr('disabled', true);
		$('#loginFormData').find('#userId').val("");
		$('#loginFormData').find('#userPw').val("");
		$('#loginFormData').find('#dtm').val(DateUtils.nowFormat("yyyy-MM-dd hh:mi:ss"));
		$('#loginFormData').find('#num').val(0);
		$('#loginFormData').find('#check').val("Y").attr('checked', true);
	}
	
	function loginProc() {
		
		var obj = {
				url : "/main/login/proc",
				method : "POST",
				param : AjaxUtils.getParam(
					"#loginFormData",
					function() {
						EventUtils.onlyInt("#dtm");
					},
					function(param) {
						EventUtils.dtmFormat("#dtm");
						param += ($("#check").is(':checked')) ? "" : "&check=N";
						return param;
					}
				),
				funcOk : function(data) {
					// alert(data.message);
					location.href = "/main/page";
				},
				funcErr : function(data) {
					
				}
		}
		console.log(obj.param);
		AjaxUtils.run(obj);
	}
</script>
</html>

